import{r as e,u as a,a as s,j as t,B as n,P as l,T as i,G as o,b as c,F as r,I as d,S as h,M as x,A as u,c as g,d as j,e as p,f as v,g as f,h as m,i as S,k as w,L as y}from"./index-Dw3b-625.js";import{T as b}from"./TablePagination-tYdaDAEV.js";const C=()=>{const[C,P]=e.useState([]),[N,k]=e.useState(""),[B,I]=e.useState(""),[T,A]=e.useState(0),[L,R]=e.useState(5),[W,$]=e.useState(""),[D,M]=e.useState([]),U=a(),_="http://localhost:5000";e.useEffect((()=>{(async()=>{try{const e=await s.get(`${_}/invoice`);P(e.data)}catch(e){}})()}),[]),e.useEffect((()=>{(async()=>{try{const e=await s.get(`${_}/college/view-college`);M(e.data)}catch(e){}})()}),[]);const z=e.useCallback((async e=>{try{const a=await s.get(`${_}/invoice/invoice-list/${e}`);if(a.data.pdfBase64){const e=atob(a.data.pdfBase64),s=new Array(e.length);for(let a=0;a<e.length;a++)s[a]=e.charCodeAt(a);const t=new Uint8Array(s),n=new Blob([t],{type:"application/pdf"}),l=URL.createObjectURL(n);window.open(l,"_blank")}}catch(a){}}),[]),E=C.filter((e=>{var a,s,t;const n=!N||(null==(a=e.billNo)?void 0:a.toString().includes(N.toString())),l=!B||(null==(s=e.status)?void 0:s.toString().includes(B.toString())),i=!W||(null==(t=e.college)?void 0:t.toString().includes(W.toString()));return n&&l&&i})),O=E.slice(T*L,T*L+L);return t.jsx(n,{className:"box-container",children:t.jsxs(l,{elevation:3,className:"paper-container",children:[t.jsx(i,{variant:"h6",className:"typography",marginBottom:2,children:"Invoice List"}),t.jsxs(o,{container:!0,spacing:2,children:[t.jsx(o,{size:{xs:12,md:6},children:t.jsx(c,{label:"Search",variant:"outlined",fullWidth:!0,value:N,onChange:e=>k(e.target.value)})}),t.jsx(o,{size:{xs:12,md:6},children:t.jsxs(r,{fullWidth:!0,children:[t.jsx(d,{children:"Status"}),t.jsx(h,{fullWidth:!0,value:B,onChange:e=>I(e.target.value),children:["Done","Pending","Revert"].map(((e,a)=>t.jsx(x,{value:e,children:e},a)))})]})})]}),t.jsx(n,{marginTop:2,width:"100%",children:t.jsx(u,{fullWidth:!0,options:D.map((e=>e.collegename)),value:W,onChange:(e,a)=>{$(a)},renderInput:e=>t.jsx(c,{...e,label:"Select College",variant:"outlined"}),sx:{width:"100%"}})}),t.jsx(g,{component:l,sx:{flex:1,overflow:"auto",marginTop:2},children:t.jsxs(j,{stickyHeader:!0,children:[t.jsx(p,{sx:{bgcolor:"#f5f5f5"},children:t.jsxs(v,{children:[t.jsx(f,{children:"Bill No"}),t.jsx(f,{children:"College Name"}),t.jsx(f,{children:"Date"}),t.jsx(f,{children:"Status"}),t.jsx(f,{children:"View Invoice"})]})}),t.jsx(m,{children:O.map((e=>t.jsxs(v,{children:[t.jsx(f,{children:e.billNo}),t.jsx(f,{children:e.college}),t.jsx(f,{children:S(new Date(e.date),"dd/MM/yyyy")}),t.jsx(f,{onClick:()=>U("/invoice-update"),sx:{cursor:"pointer"},children:e.status}),t.jsx(f,{children:t.jsx(w,{color:"secondary",onClick:()=>z(e._id),sx:{mr:1},children:t.jsx(y,{})})})]},e._id)))})]})}),t.jsx(b,{rowsPerPageOptions:[5,10,20,50],component:"div",count:E.length,rowsPerPage:L,page:T,onPageChange:(e,a)=>{A(a)},onRowsPerPageChange:e=>{R(parseInt(e.target.value,10)),A(0)}})]})})};export{C as default};
